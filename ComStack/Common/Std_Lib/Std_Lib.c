/**********************************************************************************************************************
**  COPYRIGHT
**  -------------------------------------------------------------------------------------------------------------------
**
**  Copyright (c) by ChongQing JiCheng Automotive Electronics CO.,LTD(CJAE).               All rights reserved.
**
**                This software is copyright protected and proprietary to CJAE.
**                CJAE grants to you only those rights as set out in the license conditions.
**                All other rights remain with CJAE.
**
**  -------------------------------------------------------------------------------------------------------------------
**  FILE DESCRIPTION
**  -------------------------------------------------------------------------------------------------------------------
**           File:  Std_Lib.c
**      Component:  -
**         Module:  -
**  
**    Description:  -
**
**  -------------------------------------------------------------------------------------------------------------------
**  MISRA VIOLATIONS
**  -------------------------------------------------------------------------------------------------------------------
**  Number          MISRA Rule                  Reason of violations
**  -------------------------------------------------------------------------------------------------------------------
**
**********************************************************************************************************************/

/**********************************************************************************************************************
**  AUTHOR IDENTITY
**  -------------------------------------------------------------------------------------------------------------------
**  Name                     Initials           Company
**  -------------------------------------------------------------------------------------------------------------------
**  YuGui                    YG                 ChongQing JiCheng Automotive Electronics CO.,LTD
**  -------------------------------------------------------------------------------------------------------------------
**  REVISION HISTORY
**  -------------------------------------------------------------------------------------------------------------------
**  Version   Date           Author             Description
**  -------------------------------------------------------------------------------------------------------------------
**  01.00.00  2018-10-30     YG                 - Primary edition.
**********************************************************************************************************************/

/**********************************************************************************************************************
**  INCLUDES
**********************************************************************************************************************/

#include "Std_Lib.h"

/**********************************************************************************************************************
**  LOCAL CONSTANT MACROS
***********************************************************************************************************************/

/**********************************************************************************************************************
**  LOCAL FUNCTION MACROS
***********************************************************************************************************************/

/**********************************************************************************************************************
**  LOCAL DATA TYPES AND STRUCTURES
***********************************************************************************************************************/


/**********************************************************************************************************************
**  LOCAL FUNCTION PROTOTYPES
***********************************************************************************************************************/


/**********************************************************************************************************************
**  LOCAL DATA PROTOTYPES
***********************************************************************************************************************/

/**********************************************************************************************************************
**  GLOBAL DATA
***********************************************************************************************************************/

/* ============================================================================================= */
/* -------------------------------- GLOBAL CONSTANTS SECTION ----------------------------------- */
/* ============================================================================================= */


/* ============================================================================================= */
/* -------------------------------- GLOBAL VARIABLES SECTION ----------------------------------- */
/* ============================================================================================= */


/**********************************************************************************************************************
**  FUNCTIONS DEFINE SECTION
***********************************************************************************************************************/
/* ============================================================================================= */
/* ----------------------------- FUNCTIONS DEFINE SECTION START -------------------------------- */
/* ============================================================================================= */
/*!
*************************************************************************************************
** Service name:
**   Sync/Async: Synchronous
**   Reentrancy: Non Reentrant
** ----------------------------------------------------------------------------------------------
**    Param[in]: pDes                  :destination data pointer
**    Param[in]: val                   :set value
**    Param[in]: len                   :data length
**   Param[out]: None.
** ----------------------------------------------------------------------------------------------
** Return value: None.
**        \ret1: void.
** ----------------------------------------------------------------------------------------------
**  Description: set value to pStr.
**      History:
**    - YuGui    2018-10-30       Primary edition.
*************************************************************************************************
*/
void Std_Lib_SetMemory(uint8 *pStr, uint8 val, uint16 len)
{
    LIB_ENTER_EXCLUSIVE_AREA_0();

    if ( (len > 0u) && (len < 0xFFFFU) )
    {
        while ( len != 0u )
        {
            *pStr = val;
            pStr ++;
            len --;
        }
    }

    LIB_EXIT_EXCLUSIVE_AREA_0();
}

/*!
*************************************************************************************************
** Service name: Std_Lib_MemCopy
**   Sync/Async: Synchronous
**   Reentrancy: Non Reentrant
** ----------------------------------------------------------------------------------------------
**    Param[in]: pDes - destination data pointer.
**    Param[in]: pSrc - source data pointer.
**    Param[in]: len  - data length.
**   Param[out]: None.
** ----------------------------------------------------------------------------------------------
** Return value: None.
** ----------------------------------------------------------------------------------------------
**  Description: Copy data from pSrc to pDes
**      History:
**    - YuGui    2018-10-30       Primary edition.
*************************************************************************************************
*/
void Std_Lib_MemCopy(uint8 *pDes, uint8 *pSrc, uint16 len)
{
    uint16 index;

    LIB_ENTER_EXCLUSIVE_AREA_0();

    if ( ( len > 0u ) && ( len < 0xFFFFU ) )
    {
        for( index = 0u; index < len; index++ )
        {
            pDes[index] = pSrc[index];
        }
    }

    LIB_EXIT_EXCLUSIVE_AREA_0();
}

/*!
*************************************************************************************************
** Service name: Std_Lib_BubbleSort
**   Sync/Async: Synchronous
**   Reentrancy: Non Reentrant
** ----------------------------------------------------------------------------------------------
**    Param[in]: pData  - data pointer.
**    Param[in]: length - data length.
**   Param[out]: None.
** ----------------------------------------------------------------------------------------------
** Return value: None.
** ----------------------------------------------------------------------------------------------
**  Description: Use bubble sort method
**      History:
**    - YuGui    2018-10-30       Primary edition.
*************************************************************************************************
*/
void Std_Lib_BubbleSort(uint16 *pData, uint8 length)
{
    uint8  i, j;
    uint16 temp;
    uint8  tmpLen = 0u;

    if( ( length > 0u ) && ( length < 0xFFU ) )
    {
        for ( j = 0u; j < ( length - 1u ); j++ )
        {
            tmpLen = length - j - 1u;

            for ( i = 0u; i < tmpLen; i++ )
            {
                if ( pData[i + 1u] < pData[i] )
                {
                    temp = pData[i];
                    pData[i] = pData[i + 1u];
                    pData[i + 1u] = temp;
                }
            }
        }
    }
}

/*!
*************************************************************************************************
** Service name: Std_lib_CalcAverage
**   Sync/Async: Synchronous
**   Reentrancy: Non Reentrant
** ----------------------------------------------------------------------------------------------
**    Param[in]: pData  - data pointer.
**    Param[in]: length - data length.
**   Param[out]: None.
** ----------------------------------------------------------------------------------------------
** Return value: average value.
** ----------------------------------------------------------------------------------------------
**  Description: Calculate average value.
**      History:
**    - YuGui    2018-10-30       Primary edition.
*************************************************************************************************
*/
uint16 Std_lib_CalcAverage(const uint16 *pData, uint8 length)
{
    uint8  i;
    uint32 sum = 0u;
    uint16 average = 0u;

    if ( ( length > 0u ) && ( length < 0xFFU ) )
    {
        for ( i = 0u; i < length; i++ )
        {
            sum += pData[i];
        }

        average = (uint16)( sum / length );
    }
    else
    {}

    return (average);
}

/* ============================================================================================= */
/* ----------------------------- FUNCTIONS DEFINE SECTION END ---------------------------------- */
/* ============================================================================================= */


/*********************************************************************************************************************/

/* EOF: Std_Lib.c */
